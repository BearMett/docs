
# EOSIO Dawn 4.1 출시

우리는 1.0 출시를 향해 계속 행진하고 있고, 오늘 EOSIO 소프트웨어의 4.1 출시
태그를 달았습니다.

## 중요한 변경 사항

우리는 계속해서 버그를 잡고 안정성을 개선하고 있습니다. 일반적인 네트워크
안정성 문제, 네트워크에 스팸이 되는 중복 트랜잭션 문제, 어떤 경우에 트랜잭션을
전파하지 못하는 노드 문제를 비롯한 여러 문제를 고쳤습니다.

### 장애가 발생한 노드를 다시 서비스 상태(online)으로 되돌리기

우리는 nodeos를 개선해서 허용되고 가역적인 블록을 계속 수용할 수 있도록 했습니다([#3140](https://github.com/EOSIO/eos/issues/3140)). 이로써 노드가 다시 온라인 상태가 되고 리싱크(resync)하는 스타트업 시간을 크게 개선했습니다.

#### [깃헙 이슈 3140](https://github.com/EOSIO/eos/issues/3140)

노드가 셧다운하면 가장 최근 240개(혹은 그 이상)의 블록이 유실됩니다. 이런 경우는 대개 문제가 아닙니다. 왜냐하면 노드는 리부팅할 때 다른 피어 노드로부터 블록을 싱크할 것이기 때문입니다. 그러나 블록 생성 로직에 있는 버그 하나로 인해서, 동시에 모든 노드가 결정론적으로 크래시하는, 크래시 유형이 하나 존재합니다. 이런 크래시 유형은 네트워크를 지켜보고 있는 모든 노드(speculative validators)를 다운시킬지도 모르고 그렇지 않을지도 모릅니다.

이와 같은 이벤트에서 프로듀서들은 "비잔틴 증거"를 생성하지 않고는 체인을 재시작할 수 없을 것입니다.

이 문제를 해결하기 위해서, 적용되었지만 되돌릴 수 있는(applied but reversible) 블록을 저장할 새로운 공유 메모리 파일(chainbase)을 만들기로 했습니다.

셧다운 모드에서는 이렇습니다:
1. Graceful - 포크 데이터베이스는 디스크에 로깅되고, 로딩할 때 복원됨.
2. Ungraceful - 포크 데이터베이스는 디스크에 로깅되지 않아서, forkdb와 공유 메모리 상태가 불일치하도록 그대로 놓아두고 "replay"를 강제하게 함. 이론적으로 모든 내용이 일치 상태에 도달되기 전까지는 모든 undo 이력이 삭제(pop)될 수 있음.

스타트업(시작) 모드에서는 이렇습니다:
1. Replay - 포크 데이터베이스를 모두 삭제하고, 네트워크로부터 가장 최근 240개 블록을 재동기화해야 함.
2. Resync - forkdb와 공유 메모리의 내용이 사라지고, 모든 것을 처음부터 다운로드 받음.
3. Inconsistent - forkdb는 공유 메모리 파일의 내용과 불일치하는 상태임.

버그 처리하기

때때로 "나쁜 블록" 하나가 버그를 일으키고, 노드는 해당 블록 없이 스타트업을 하려고 할 것입니다. 이 블록은 포크 데이터베이스에 있거나 계류 중인 블록 캐시에 존재할 수 있습니다. 몇몇 극단적인 경우(비잔틴 오류가 있는 등)에 블록은 비가역 블록 로그에 존재할지도 모릅니다.

구동을 시작하는 시점에, 노드는 자신이 시작하기 위하는 블록이 "어느 블록"인지 명시할 수 있어야 합니다.

### 커맨드 라인 툴 개선

커맨드 라인 툴인 `cleos`는 이제 프로듀서 전체 목록을 출력할 수 있게 되었습니다([#2933](https://github.com/EOSIO/eos/issues/2933)). 한 페이지씩 출력할 수 있고 받은 투표수로 정렬됩니다.

#### [깃헙 이슈 2933](https://github.com/EOSIO/eos/issues/2933)

`slim` 브랜치에서 오직 10개의 프로듀서만 알파벳 순서대로 보여줌. 사용하는 커맨드는 다음과 같음(동일한 출력을 돌려줌)

```
cleos system listproducers

cleos get table eosio eosio producers
```
만약 (예를 들어서 모두 "k"로 시작하는 이름을 가지고 있다고 가정하고) 10개의 프로듀서가 등록되어 있고 "m"으로 시작하는 프로듀서를 하나 추가하려고 한다면, 목록에 보이지 않을 것임. 그런데 첫 글자가 "a"로 시작하는 프로듀서를 추가하면, (목록) 제일 처음에 등록되고 기존에 있던 제일 마지막 프로듀서가 제거될 것임. (제거된 프로듀서는 블록을 생성하지만, 아마 목록 출력에만 영향을 줌)

업데이트. `cleos system listproducers` 명령은 이름으로만 정렬하고 첫 10개만 보여줌.

업데이트. 10개 이상의 목록을 보여주는 방법을 찾음.

```
сleos get table eosio eosio producers -l 100
```
그러나 `cleos system listproducers`의 목록 개수 제한을 늘릴 수 있는 키값은 없으며, 확인한 바로는 프로듀서 순서가 알파벳 순서이고 지분참여된(staked) 토큰량에 따르지 않음.

### Quality Name Distribution & Namespaces

이번 릴리즈에서 특히 주목할만한 점은 계정 이름을 "."이 없는 정확히 12글자로 제한한 점입니다. 이 변경은 계정 이름 알박기를 좌절시키기 위한 시도입니다. 댄은 깃헙 이슈([#3189](https://github.com/EOSIO/eos/issues/3189))를 통해서 이름 정책에 관한 자신의 제안에 대해 커뮤니티의 피드백을 요청하고 있습니다.

#### [깃헙 이슈 3189](https://github.com/EOSIO/eos/issues/3189)

현재 EOSIO는 12글자보다 짧고 "."를 포함하는 새로운 계정 이름의 생성을 금지하고 있습니다. 이 제한의 목적은 계정 이름 알박기를 좌절시키기 위해서입니다. 그렇긴 합니다만, 사용성의 측면에서 보자면 짧은 계정 이름이 바람직합니다. 왜냐하면 짧은 계정 이름은 시장성있는 상품이기 때문입니다.

게다가 조직(사업체)의 입장에서는 ".edu"나 ".com"과 같이 누구나 신뢰할 수 있는 계정 접미어(suffix)를 사용할 수 있는 "신뢰할 만한" 이름 체계(namespace)를 만들 수 있다면 바람직할 것입니다. 짧은 접미어를 이용하면 긴 계정 이름을 접두-접미어로 구성할 수 있고, 그렇게 되면 좀더 큰 이럼 체계가 가능해지고 더 가치있게 됩니다.

짧은 계정 이름과/또는 이름 체계를 할당하는 가장 경제적으로 효율적이고 공정한 방법은, 이름을 시장가로 판매하는 것입니다. 프리미엄 계정 이름에 대해 최대의 가치를 얻기 위해서는, 한번에 판매되면 안 되고 시간을 두고 판매되어야 합니다.

##### 제안
1. "com" 계정 이름만 유일하게 새로운 계정 "xyz.com"을 등록할 수 있음
2. 많아도 하루에 단 하나의 ("."을 포함하지 않는) "프리미엄 계정 이름"만 판매될 수 있고 가장 높은 경매가를 받은 계정 이름일 것임.

###### 계정 이름 경매

```
bidname( account_name bidder, account_name desired, asset bid )
```
만약 '호가'가 가장 높은 경매자보다 큰 경우, 경매자는 해당 계정 이름의 예정된 낙찰자가 됩니다. 각각의 호가는 기존 호가보다 10% 이상 커야만 합니다. 기존의 입찰자는 환불받게 됩니다. 이런 방법으로 참여자가 충분히 높은 가격으로 입찰하고, 입찰했을 때 바로 빠지지 않게 하며 같은 이름을 두고 왔다갔다 입찰하지 못하게 합니다. 게다가 이런 방법을 사용하면 자신보다 높은 낙찰가를 다른이가 부르지 않기를 바라는 계정 이름 알박기를 좌절시킵니다.

24시간마다 가장 높은 입찰가를 받은 이름 하나가 낙찰됩니다. 한번 낙찰되면 낙찰자는 해당 계정을 등록하는 `newaccount` 액션을 사용할 수 있습니다. 이 시점에 이르면 경매에 할당된 메모리는 응찰자(bidder)에게 되돌려집니다.

###### 대중을 위한 쉬운 옵션

대다수의 사용자는 매일 이러나는 계정 이름 옥션에 참여하길 원치 않을 것입니다. 왜냐하면 이 과정은 느리고 매우 경쟁이 치열한 과정이기 때문입니다. 대신 이름-등록소(name-registrars)는 좋은 이름에 입찰할 것이고, "하위 계정 이름"으로 사용자들의 계정을 만들 것입니다. 대형 DAPP은 아마 자체 브랜드 이름 체계를 따로 잡고 프리미엄 계정 이름에 대한 자체 정책을 가져가고 싶어할 것입니다.

###### 무효화 불가(Non-Revokable)

'.com'이 계정 'xyz.com'을 한번 만들면, 이 계정은 삭제될 수 없고, 'xyz.com'의 소유자는 잠재적으로 이 계정을 다른 누군가에게 양도할 수 있습니다. 만약 접미어 ".com"으로 끝나는 모든 계정에 대한 제어권을 행사하고 싶은 회사가 있다면, "owner" 퍼미션을 그에 맞추어 설정할 필요가 있을 것입니다.

###### 옥션 수입

옥션에서 얻은 수입은, 할당되지 않은 다른 인플레이션과 램 거래 수수료와 같이 시스템 잔고 계정(system savings account)에 귀속됩니다.

##### FAQ on Quality Name Distribution & Namespaces

1. 모든 계정 이름은 언제나 경매에 부쳐질 수 있지만, 매일 가장 높은 입찰가를 받은 계정 이름 하나만 낙찰됩니다. 판매되는 이름의 순서는 "가장 비싼 것 먼저"입니다.
2. 미래에 있을 worker proposal은 이름 경매로부터 얻은 수입을 할당할 수 있을 것입니다.
3. 12자 제한은 "접미어"를 포함한 이름 전체에 적용됩니다.

##### 덧붙임 by @bytemaster

* 유저 사용성의 관점에서 본다면 "이름 시작"에서 신원을 확인할 것이라서, 접미어가 더 적절해 보입니다. 경매가 끝나는 관점에서 본다면, 마지막 응찰 이후 최소한 24시간이 지나야 한다는 점에 동의합니다.
* 남은 작업들
  * `eosio_global_state`, `bidname`, `namebids` 테이블에 대해 ABI 업데이트하기
  * 승인되지 않은 계정이 생성되지 않음을 검증하는 유닛 테스트 작성
* 미래애 SYMBOL 이름은 거래소(exchange)와/또는 토큰 컨트랙트를 통해서 할당되어야만 합니다. 이번 제안에는 SYMBOL 이름을 현재 지원하고 있지 않습니다.
* 사이드 체인은 메인 체인으로부터 계정을 가져올(import) 것 같습니다.


### 코어 토큰 이름 변경

토큰 심볼의 이름을 "EOS"에서 "SYS"로 변경했다는 점을 알고 계셔야 합니다. 혹시 다른 이름으로 바꾸고 싶다면, `CMakeLists.txt` 파일에 있는 `CORE_SYMBOL_NAME`을 체크하세요.

### BIOS 부트 프로세스 튜토리얼

EOSIO 네트워크를 부트하는 데 필요한 과정을 설명하는 스크립트와 자세한 튜토리얼(https://github.com/EOSIO/eos/tree/master/programs/bios-boot-tutorial)을 준비했습니다. 멀티시그(multi-sig)를 이용해서 프로듀서를 통해 `eosio.system` 컨트랙트와 `eosio.token` 컨트랙트를 업그레이드하는 내용을 담은 추가적인 과정을 설명하는 내용을 다음주에 스크립트와 튜토리얼에 추가할 것입니다.

## 테스트넷

우리가 운영하고 있는 내부적인 테스트넷은 강건하게 동작하고 있습니다. 다수의 커뮤니티 테스트넷을 기쁜 마음으로 지켜보고 있고 우리가 거기서 목격하고 있는 작업들에 대해서 자랑스럽습니다. 특기할 만한 테스트넷은 최근 빌드(DAWN-2018-05-16)로 동작하고 있고 70개 이상의 노드가 연동된 EOS Jungle 테스트넷(http://dev.cryptolions.io)입니다. EOSIO 커뮤니티 테스트넷 텔레그램(https://t.me/CommunityTestnet)을 통해서 최근 소식에 귀기울여주세요.

## 패트로니오스 - Patroneos

남용으로부터 RPC-API 엔드포인트를 보호할 새로운 툴을 준비하고 있습니다. 우리는 이 툴을 패트로니오스라고 부르는데, 왜냐하면 영혼을 빨아먹는 스패머인 디멘터를 궁지로 몰아넣기 때문입니다. 우리가 현재 계속 지켜보고 있는 행동 패턴은 반복되고 유효하지 않은 JSON payload, 서명 스팸, 블랙리스트 처리된 컨트랙트, 지나치게 큰 트랜잭션 payload와 같은 것들입니다.

우리는 이 툴을 내부적으로 개발해왔고 곧 자세한 내용과 함께 커뮤니티에 출시할 것입니다. 어떻게 나올지 지켜봐주세요.

## 깃헙에 올라온 Dawn 4.1

EOSIO Dawn 4.1은 깃헙에 올라와있습니다. (https://github.com/EOSIO/eos/releases/tag/dawn-v4.1.0) 이를 이용해서 개발자들과 블록 프로듀서 출마자들은 애플리케이션과 네트워크를 계속 테스트할 수 있습니다.

## 커뮤니티 지원
우리는 커뮤니티로부터 피드백을 듣는 게 참 좋고, EOSIO를 성공적으로 동작시키도록 커뮤니티를 돕는 데 헌신하고 있습니다. 우리의 EOSIO 스택 익스체인지 (https://eosio.stackexchange.com/) Beta는 잘 성장하고 있고, 이 소프트웨어를 사용하는 방법에 대한 질문을 스택 익스체인지에 올려주시길 장려합니다.

깃헙에 아래 정보를 포함시켜서 잠재적으로 보일 지도 모르는 버그를 계속 리포트해주시길 바랍니다.

* Testnet: 이슈를 발견한 테스트넷이 어디인지
* EOSIO git version: `nodeos -v output` 결과 문자열
* config.ini: 사용하고 있는 `config.ini` 파일을 첨부해주세요
* genesis.json: 사용하고 있는 `genesis.json` 파일을 첨부해주세요
* Command line: 사용한 `nodeos` 전체 커맨드 명령어
* Console output: 확인하고 있는 에러와 관련된 콘솔 디버그 출력값 (짧으면 아예 이슈 설명에 붙여넣어도 좋습니다)

## 추후 릴리즈

우리는 다음주 금요일, 그러니까 5월 25일 경 프리릴리즈(Dawn 4.2)를 한 번 더 계획하고 있고 6월 1일에 EOSIO 1.0을 예정하고 있습니다. 깃헙의 버전 1.0 마일스톤(https://github.com/EOSIO/eos/milestone/10)을 지켜보시면 다음 몇 주간 우리가 집중해서 작업하고 있는 이슈들을 따라잡으실 수 있습니다.

## 번역 정보

* 원문
  * https://github.com/EOSIO/eos/releases/tag/dawn-v4.1.0
  * https://github.com/EOSIO/eos/issues/3140
  * https://github.com/EOSIO/eos/issues/2933
  * https://github.com/EOSIO/eos/issues/3189
* 출시 노트 원문 포스팅 시점 : 한국표준시 2018년 5월 19일 오전 8시 10분
    * 각 깃헙 이슈의 포스팅 시점은 출시 노트 포스팅 시점과 다릅니다.