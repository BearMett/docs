# EOSIO Dawn 4.0 Release

지난 주 우리는 EOSIO Dawn 4.0을 소개해드렸습니다. 오늘 우리는 EOSIO의
이어지는 주요 프리릴리즈를 여러분께 내놓게 되어서 자랑스럽습니다.
지난 일주일 동안 많은 일이 일어났습니다!

## Dawn 4.0 램 할당 방식에 대한 피드백

몇몇 커뮤니티 구성원들은 사람들이 체인을 사용하면서 RAM을 확보하기도 전에
일부 사람들이 RAM의 가격이 저렴할 때 RAM을 사재기하여 정당하지
않은 이익을 얻을 것이라는 점에 대해 우려를 표했습니다. 이와 같은 문제를
완화하기 위해서, 우리는 체인을 런칭하는 주체들이 매우 제한된 양의
RAM 공급으로 체인을 시작하고, 처음 몇 달에 걸쳐서 서서히 RAM 용량을
확장하기를 권합니다. RAM을 32GB부터 공급하기 시작하고 몇 개월에 걸친 기간 동안
1TB로 증설한다면, RAM 가격은 시간이 지남에 따라 초기 가격의 3%로 급격히
떨어질 지도 모릅니다. 입찰을 할 때 정말 RAM이 필요한 사람들만, 향후 램 공급량을
감안할 사정이 있는 사람들만 초기 RAM을 구매할 것입니다. 어느 쪽이든, 
아무도 "값싼" RAM 또는 "무료 이익"을 얻지 않을 것입니다.

## 테스트넷 현황

유럽, 아시아, 미국에 설치된 노드로 구성한 우리의 내부 테스트넷은 큰 문제 없이
제대로 작동되고 있습니다.

## 주관적 CPU 자원 사용량 계산이 돌아왔습니다.

지난 몇 개월 동안 우리는 객관적 CPU 사용량 계산을 실험해왔습니다. 객관적
사용량 계산은 트랜잭션 처리 과정에서 사용되는 CPU 인스트럭션 개수를 
결정론적 방식으로 계산하려고 시도합니다. 이런 방식의 계산은 트랜잭션이
소모한 자원이 무엇인지에 대해 완전하고 모호하지 않은 합의를 보장하는 
좋은 특성이 있습니다. 이 방식은 다른 스마트 컨트랙트 플랫폼에서도 사용되는
방식이기도 합니다.

일 년 전 우리가 EOSIO를 소개할 때 우리는 [주관적인 최선의 스케줄링](https://github.com/eoseoul/docs/blob/master/ko/translations/TechnicalWhitePaperV2.md#%EC%A3%BC%EA%B4%80%EC%A0%81%EC%9D%B8-%EC%B5%9C%EC%84%A0%EC%9D%98-%EC%8A%A4%EC%BC%80%EC%A4%84%EB%A7%81) 방식을 제시했습니다. 이 모델에서 각 블록 프로듀서는 트랜잭션 실행에
소요되는 시간을 측정하고 그에 따라 사용자에게 요금을 청구합니다. 사용량에 대한
합의를 유지하기 위해서, 프로듀서는 트랜잭션 처리에 대해 부과한 
마이크로 초(microsecond) 수를 고지할 것입니다.

객관적 사용량 계산은 사용량 청구 분쟁을 없애고 합의 과정을 단순화할 수 있다는
점에서 훌륭합니다만, 다음과 같은 몇 가지 단점으로 인해 우리는 결국 주관적
사용량 계산 방식을 사용하기로 결정했습니다.

1. 객관적 CPU 사용량 측정을 위해서는 사용량 기록을 추가로 남겨야 하고 이로 인해 성능을 저하시킵니다.
2. 객관적 CPU 사용량 측정의 과정에서 액션의 실제 자원 소모량과 객관적인 측정 방식을 통한 근사치 사이에 불일치가 발생할 수 있는데, 이런 경우가 생길 때마다 이를 악용한 공격 경로와 서비스 거부 공격(denial of service) 경로가 생길 수 있습니다.
3. 객관적인 CPU 사용량 측정 방법은 유지하고 업그레이드하고 최적화해가기가 어렵습니다.

주관적 CPU 사용량 계산은 나름의 문제점이 있고, 특히 합의 시스템의 측면에서
그렇습니다. 다행히도 우리는 주관적 CPU 사용량 계산을 타당하게 만들어주는
혁신적인 해결책을 찾았습니다. 해결이 필요한 문제들 몇 개는 아래와 같습니다.

1. 블록 프로듀서가 사용량을 정확히 고지할 것이라고 신뢰해야 함
2. 프로듀서 저마다의 계산 방식 차이를 해결해야 함 (각 프로듀서마다 하드웨어/소프트웨어/로드가 다름)
3. 나쁜 마음을 먹은 프로듀서를 상대해야 함

위임 지분 증명을 사용하는 환경에서, 블록 프로듀서는 계약상의 의무를 지고
악의적인 행위시 오랫동안 법률적으로 안 좋은 영향을 받는 공공단체일 것으로
여겨집니다. 뿐만 아니라 모든 21개의 활성화된 프로듀서는 이들을 선출한
커뮤니티로부터 높은 평가를 받을 것이라고 예상됩니다.

이와 같은 예상에 근거할 때 우리는 프로듀서 모두가 CPU 처리 시간(runtime)
오라클(옮긴이 주: 정확한 정보를 주는 주체)의 역할을 하고 트랜잭션 1건
처리시 소요되는 시간에 대해 거짓된 정보를 전달하지 않을 것이라는
신뢰의 기본 원리 하나를 세울 수 있습니다. 이로써 정상적인 작동 조건에서
고지된 처리 시간(runtime)은 전체 프로듀서에 걸친 평균 소요 시간의 타당한
오차 범위 내에 있을 것이라고 믿을 수 있습니다.

이런 접근을 비판하는 사람이 있다면 악의적인 프로듀서 하나가 무한 루프가 있는
블록 하나를 만들고 이 블럭은 처리 시간이 전혀 들지 않는다고 고지할 수도 있다고
지적할지도 모릅니다. 이런 시나리오를 방지하기 위해 모든 노드는 모든 블록에 대해
몇 초 정도의 처리 시간 한도를 걸어둡니다. 그러나 이런 한도가 있다고 해도
이런 시나리오는 네트워크에 상당한 혼란을 일으킬 수 있습니다. 요령 있고 삐뚤어진
프로듀서는 50%의 노드가 수용하고 50%는 거절할 그런 블록을 만들어내서 
네트워크를 두 동강으로 분열시킬지도 모릅니다.

우리 팀은 이와 같은 공격 경로를 분석해왔고, 매우 긴 시간의 처리가 필요한 블록의
발생은 매우 긴 네트워크 지연이나 장애와 전혀 다를 바가 없다는 점을 깨닫게
되었습니다. 네트워크가 분할되는 상황에도 견고한 어떠한 합의 알고리즘도
이론적으로 발생할 수 있는 다른 상황에 직면하는 경우에도 역시 견고해야만 합니다.
비잔틴 장애 내성이 있는 DPOS는 (미국과 중국이 전체 인터넷에서 일시적으로
연결이 끊겼을 경우와 같은) 네트워크 분할을 견뎌낼 수 있기 때문에,
위와 같은 상태를 만들어내는 악의적인 프로듀서보다 더 오래 존속할 수 있습니다.

블록 프로듀서는, 네트워크 분할 발생 가능성을 완화할 수 있는 몇 가지 방법이
있습니다. 이런 방법은 그 원인이 대서양 아래에 설치된 광섬유케이블이 절단된
경우이거나 악의적인 프로듀서이거나 상관없이 동일합니다.

### 여러 개의 연결을 유지하기

이 접근 방법을 사용하는 경우, 대서양을 가로지르는 연결이 끊어졌을 때
프로듀서는 태평양을 통해 패킷을 라우팅시킬 수 있습니다. 블록 유효성을 검증할
단계에서 프로듀서는 두 개의 노드가 동일한 블록을 검증하지 않는
(옮긴이 주: 블록 하나는 단 하나의 노드가 검증하는) 
다수의 유효성 검증 노드를 운영해야 합니다. 가장 극단적인 경우, 각 프로듀서는
자신과 연결된 다른 프로듀서 노드 하나하나가 보내는 블록을 처리하는
각각의 전용 노드를 둘 수도 있을 것입니다. 만약 프로듀서 하나가 무한 루프 블록을
보내서 이 프로듀서에 연결된 검증 채널(노드)이 막혀버려도, 다른 프로듀서들은 
자신에게 할당된 독립되고 중복된 채널을 통해서 계속해서 통신할 수 있습니다.
비가역 블록 넘버가 나쁜 블록(무한 루프가 담긴 블록)의 블록 넘버를 지나가게 되면,
노드는 블록 처리를 강제로 중단하고 종료할 수 있습니다. 합의를 중단시켜 
블록 넘버가 커지지 못하게 막으려면, 프로듀서의 2/3 이상이 비잔틴(배반자)이
되는 경우에나 가능할 것입니다.

### 수리하거나 손상 구역을 우회

광섬유케이블 하나가 끊어지는 순간, 대신 통신을 맡길 여러 개의 광섬유케이블
연결을 준비하기가 항상 가능하지는 않습니다. 이런 장애의 경우 팀 하나가 출동해서
손상된 케이블을 교체하고 연결을 복구합니다. 이 작업이 오래 걸릴지도 모르지만,
종국에는 연결이 다시 돌아오고 네트워크는 약간의 다운 타임에 불과한 시간을 
소모한 후 합의를 이어갑니다. 삐뚤어진 프로듀서 하나가 피해를 초래하는 사태가
발생하면, 다른 프로듀서들은 살짝 설정을 변경해서 삐뚤어진 프로듀서를 블랙리스트
처리할 수 있고 이어서 네트워크는 평상시의 운용을 이어갈 것입니다.
비정상적인 처리 시간이 소요되는 블록이 발견될 때마다 악의적인 프로듀서를
블랙리스트에 올리는 작업을 자동화까지 해놓을 수도 있습니다.
최악의 시나리오로, 나쁜 프로듀서 하나가 금지 수준 근처에 있는 블록을 만들어서
딱 절반에 해당하는 프로듀서의 블랙리스트에 올라갈 수 있습니다.
이 경우 프로듀서들이 계류된 포크(pending fork) 중 어느 포크를 따라갈 지
결정할 때까지, 마지막 비가역 블록은 다음 블록으로 넘어가지(advance) 않을
것입니다.

위에 언급된 모든 경우에 있어서, 마지막 비가역 블록을 근거로 최종성을 결정하는
사용자들은 이중 지불 공격에서 안전합니다. 그리고 네트워크가 겪을 "다운 타임"은
사람들이 전력회사나 인터넷 서비스 제공자(ISP)로 인해 겪는 전형적인
"다운 타임"에 비해 짧을 가능성이 있습니다.

우리는 DPOS의 거버넌스 프로세스와 인센티브가, 악의적인 행위가 초래할 단기간의
다운 타임의 발생 확률을 인터넷 연결 문제로 발생할 수 있는 모든 블록체인 플랫폼의
다운 타임의 발생 확률보다 낮게 만들 것이라고 판단하고 있습니다. 적어도
DPOS 환경에서는, 사용자는 재연결 이후 제대로 블록을 다시 쌓지 않은 
소수 체인을 자신도 모르게 사용하게 되는 문제로부터 안전합니다.
작업 증명으로 동작하는 체인 환경에서는, 네트워크 분할이 발생하면 고정된 숫자의
승인에만 의존하는 사용자를 노린 이중 지출 공격을 불러일으키게 할 수도 있습니다.

## 시스템 컨트랙트 수정 사항

'eosio.system' 컨트랙트는 프로듀서 등록, 투표, 지분참여, 자원 할당 등의
기능을 구현하여 제공됩니다. 우리 팀은 커뮤니티가 체인을 만들 때 사용하기로
선정할지도 모르는 레퍼런스 구현을 제공하기 위해 작업해오고 있습니다.
이번 출시를 통해 시스템 컨트랙트는 아래 사항을 포함하여 수정되었습니다.

1. 150,000,000.0000 개의 토큰이 최소 하나의 프로듀서 또는 하나의 대리인(proxy)에 투표를 진행한 상태에 도달하기까지, 어느 누구도 지분회수(unstake)를 할 수 없음.
2. 만약 어느 체인 하나가 10%의 토큰을 블록원에 할당하기를 원한다면, 일년에 1%씩만 지분회수(unstake)하도록 제한(rate limit)될 것임.

(옮긴이 주: 사용자가 대리인(proxy)을 설정하면, 사용자 자신이 지분참여한 토큰만큼을 대리인이 대신 투표할 수 있습니다. 대리인을 설정하지 않은 경우, 지분참여한 토큰이 있는 자신의 계정을 대리인(proxy)으로 등록할 수 있습니다.)

## 해킹당한 계정 복구 & 잃어버린 패스워드 복구

우리 팀은 해킹당한 계정을 복구하고 잃어버린 패스워드를 복구하는 새로운 방법을
만들어냈고, 이 방법을 이용하면 웹어셈블리로 거의 모든 기능을 구현할 수 있습니다.
우리는 해당 계정이 권한 레벨을 승인한 가장 마지막 시각 정보를 돌려주는
새로운 내장 API를 추가했습니다. 이 정보를 이용해서 스마트 컨트랙트는
잃어버린 패스워드를 리셋하기 전 7일 동안의 고지 이후
30일 동안의 비활동 기간을 강제하기 위해 필요한 로직을
전부 웹어셈블리로 구현할 수 있습니다.

우리는 하드-코딩한 액션 핸들러 3개를 지웠고, 이로써 잠재적인 버그를 제거하고
나중에 소프트-업데이트로 쉽게 개선할 수 있게 만들어 놨습니다. 1.0 출시 이후
잃어버린 패스워드 복구를 구현한 하나 이상의 구현체가 별도의 스마트 컨트랙트로
제공될 지도 모릅니다.

(옮긴이 주: `eosio_contract.cpp`, `eosio_contract_api.cpp` 등의 파일과 다음 이슈를 통해서 기존의 구현과 변경 사항을 확인할 수 있습니다. https://github.com/EOSIO/eos/issues/2854 , https://github.com/EOSIO/eos/pull/285 )

## 깃헙에서 내려받을 수 있습니다.

EOSIO Dawn 4.0은 이제 깃헙에서 내려받을 수 있습니다. 개발자들은 어플리케이션
테스트를 시작할 수 있습니다.

## EOSIO 1.0이 곧 출시됩니다.

우리 팀은 안정적인 EOSIO 1.0을 6월 첫 번째 주에 시장에 출시하기 위해 24시간 내내
일하고 있습니다. 이 첫 번째 출시에는 누구나 EOSIO 기반의 자체 블록체인을 만들 수
있도록 필요한 모든 기능이 담길 것입니다. 우리는 "기능 동결"한 스펙을 구현해왔고
남은 몇 주 동안 내부 테스트넷을 운영하며 테스트하고 발견된 버그를 수정하는 데
전념할 예정입니다. 우리의 목표는 대단히 중요한 기능들이 바위처럼 극도로 
안정적인지 보장하는 것입니다. EOSIO 1.0 출시 이후 우리는 많은 사용성 개선과
기반 개선을 가져올, 포크 없는 수정을 통해서 EOSIO 소프트웨어를 지속적으로 
개선할 것입니다.

## 면책조항 - Disclaimer

면책조항: 블록원(block.one)은 소프트웨어 기업이며 EOSIO 소프트웨어를 무료 오픈소스 소프트웨어로 제작합니다. 이 소프트웨어는, 특기할 만한 점으로, 이 소프트웨어를 도입하는 사용자가 다양한 기능을 갖춘 분산 어플리케이션 또는 블록체인을 시작할 수 있도록 합니다. 자세한 내용은 다음 사이트를 방문하십시오. https://github.com/eosio 블록원은 채택하거나 구현할 수 있는 EOSIO 플랫폼의 모든 버전을 이용해서 블록 프로듀서가 되려는 사람에게 경제적 지원을 제공하지 않습니다.

블록원은 EOSIO 소프트웨어를 기반으로 하는 퍼블릭 블록체인을 론칭하지 않습니다. 자신들이 선택한 기능 및/또는 자신들이 선택한 서비스를 제공하도록, 자신들이 선택한 형태로 EOSIO를 채택하며 구현하려는 제 3자, 커뮤니티 및/또는 블록 프로듀서가 되길 원하는 주체들의 단독 책임일 것입니다. 블록원은 임의의 주체가 그러한 기능을 채택하여 구현하거나 그런 서비스를 제공하거나 EOSIO가 어떤 방식으로든 채택되고 구현된다는 것을 보증하지 않습니다.

블록원은 이 문서에 언급된 경우에도 제 3자 또는 제 3자의 제품 또는 제 3자의
서비스를 보증하지 않습니다. 블록원은 링크된 어떠한 내용에 대해서도 책임지지
않습니다.

이 문서는 블록원의 비전을 보여 주며 어떠한 보증도 아닙니다. 우리가 그 비전을 실현하도록 노력할 것이지만, 모든 측면이 모든 면에서 블록원의 단독 재량 하에 변경될 수 있습니다. 우리는 블록원의 비즈니스 전략, 계획, 전망, 개발 및 목표에 관한 진술과 같은 역사적 사실에 대한 진술 이외에 이 문서의 모든 진술을 포함하는 이 문서를 "미래 예측 진술"이라고 부릅니다. 이 진술은 예측일 뿐이며 미래의 사건에 대한 블록원의 현재의 믿음과 기대치를 반영하고 가정에 근거하며 언제든지 위험, 불확실성 및 변경의 영향을 받습니다. 우리는 급변하는 환경에서 사업을 운영합니다. 새로운 위험이 수시로 발생합니다. 이러한 위험과 불확실성을 감안할 때 이러한 미래 예측 진술에 의존하지 않도록 주의해야합니다. 실제 결과, 실적 또는 이벤트는 미래 예측 진술에 포함된 내용과 실질적으로 다를 수 있습니다. 실제 결과, 실적 또는 이벤트가 미래 예측 진술과 실질적으로 다른 원인이 될 수 있는 요인에는 시장 변동성, 자본, 재원 및 인력의 지속적인 가용성; 제품 수용; 어떤 새로운 제품이나 기술의 상업적 성공; 경쟁; 정부 규제 및 법률; 그리고 일반적인 경제, 시장 또는 사업 조건이 포함되며 이에 제한되지 않습니다.

모든 진술은 포스팅된 첫 날짜에 대해서만 말하고 블록원은 새로운 정보, 후속 사건 또는 기타의 사건이건 간에 미래 예측 진술을 업데이트하거나 변경할 의무가 없으며 분명히 부인할 의무가 없습니다. 이 문서에 나온 그 어떠한 내용도 일반적인 경우에서나 또는 특정 상황 또는 
구현에 있어서나 기술적 재무적, 투자적, 법률적 또는 다른 종류의 조언이 되지 않습니다.
이 문서에 포함된 내용을 구현하거나 활용하기 전에 해당 분야의 전문가에게 문의하십시오.

여기에서 표현된 아이디어와 정보는 전적으로 저자 개인의 것이며 블록원 또는 블록원 직원의 입장과 견해와 조언을 필연적으로 반영한 것은 아닙니다.

## 번역 정보

* 원문 : https://medium.com/eosio/eosio-dawn-4-0-release-b25661a49ac2 (2018년 5월 12일)
